angular.module("app.blog",[]).factory("BlogFactory",["$q",function(o){function t(t){var e=o.defer();return n.some(function(o,n){return t===o.id?(e.resolve(n),!0):void 0}),e.promise}function e(){localStorage.blogsList=JSON.stringify(n)}var n,r=localStorage.blogsList,i={query:function(){var t=o.defer();return t.resolve(angular.copy(n)),t.promise},get:function(e){var r=o.defer();return t(e).then(function(o){r.resolve(angular.copy(n[o]))}),r.promise},post:function(r){var i=o.defer();return r.id?t(r.id).then(function(o){n[o]=r,e()}):(r.id=String(Math.random()),n.push(r),e()),i.resolve(r),i.promise},"delete":function(r){var i=o.defer();return t(r).then(function(o){i.resolve(n.splice(o,1)[0]),e()}),i.promise}};return r?n=JSON.parse(r):(n=[{id:"fgcfgcfgcfgcfg",title:"blog title 1",content:"This is the content for blog 1"},{id:"r5dt5r5drr",title:"blog title 2",content:"This is the content for blog 2"}],e()),i}]).controller("BlogController",["$scope","BlogFactory",function(o,t){o.breadcrumb.name="",o.status={loading:!0},o.delBlog=function(e){t["delete"](o.blogs.splice(e,1)[0].id)},t.query()["finally"](function(){o.status.loading=!1}).then(function(t){o.blogs=t})}]).controller("BlogEditController",["$scope","$state","$stateParams","BlogFactory",function(o,t,e,n){o.save=function(){n.post(o.blog).then(function(){t.go("blog.list")})},e.id?(o.breadcrumb.name="Edit Blog",n.get(e.id).then(function(t){o.blog=t})):o.breadcrumb.name="Add Blog"}]);